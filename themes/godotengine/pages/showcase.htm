title = "Showcase"
url = "/showcase"
layout = "default"
description = "View some curated games made with Godot here."
is_hidden = 0
==
<?php
function onInit()
{
    $this['items'] = json_decode('
[
  {
    "title": "Kingdoms of the Dump",
    "author": "Roach Games",
    "platforms": "windows,macos,linux",
    "slug": "kingdoms-of-the-dump",
    "image": "kingdoms-of-the-dump.png",
    "placeholder": "linear-gradient(90deg,#b5c1d8 2%,#a8b5d5 9%,#707473 47%,#666a6a 57%)",
    "type": "game",
    "tags": "platformer"
  },
  {
    "title": "Haiki",
    "author": "Richard Hörnig",
    "platforms": "windows,macos,linux",
    "slug": "haiki",
    "image": "haiki.png",
    "placeholder": "linear-gradient(90deg,#2d353f 4%,#749bbf 36%,#24232a 87%,#393139 94%)",
    "type": "game",
    "tags": "platformer"
  },
  {
    "title": "The Garden Path",
    "author": "Louis Durrant",
    "platforms": "windows,macos,linux",
    "slug": "the-garden-path",
    "image": "the-garden-path.jpg",
    "placeholder": "linear-gradient(90deg,#61242a 21%,#70323a 37%,#692b33 78%,#692b32 84%)",
    "type": "game",
    "tags": "sandbox,narrative"
  },
  {
    "title": "Rogue State Revolution",
    "author": "Little Red Dog Games",
    "platforms": "windows,linux",
    "slug": "rogue-state-revolution",
    "image": "rogue-state-revolution.jpg",
    "placeholder": "linear-gradient(90deg,#896541 32%,#8d6943 42%,#8d6943 53%,#8d6943 64%)",
    "type": "game",
    "tags": "simulation"
  },
  {
    "title": "Ex Zodiac",
    "author": "Ben Hickling",
    "platforms": "windows,macos,linux,switch",
    "slug": "ex-zodiac",
    "image": "ex-zodiac.png",
    "placeholder": "linear-gradient(90deg,#659abb 3%,#649abb 14%,#71a3b8 24%,#6399bb 79%)",
    "type": "game",
    "tags": "shooter"
  },
  {
    "title": "Until Then",
    "author": "Polychroma Games",
    "platforms": "windows,macos,linux,switch",
    "slug": "until-then",
    "image": "until-then.png",
    "placeholder": "linear-gradient(90deg,#947451 12%,#a8885f 29%,#8c8977 65%,#d2ba9f 98%)",
    "type": "game",
    "tags": "narrative"
  },
  {
    "title": "Gravity Ace",
    "author": "John Watson",
    "platforms": "windows,linux",
    "slug": "gravity-ace",
    "image": "gravity-ace.png",
    "placeholder": "linear-gradient(90deg,#a52a37 20%,#0f0e24 60%,#c53f4e 88%,#b53442 93%)",
    "type": "game",
    "tags": "shmup"
  },
  {
    "title": "Human Diaspora",
    "author": "Leocesar3D",
    "platforms": "windows,linux",
    "slug": "human-diaspora",
    "image": "human-diaspora.jpg",
    "placeholder": "linear-gradient(90deg,#2e6d8f 11%,#32769d 47%,#295e8a 67%,#295e8a 73%)",
    "type": "game",
    "tags": "shooter"
  },
  {
    "title": "Primal Light",
    "author": "Fat Gem",
    "platforms": "windows,macos,linux",
    "slug": "primal-light",
    "image": "primal-light.png",
    "placeholder": "linear-gradient(90deg,#24190a 5%,#24190a 15%,#25190a 28%,#25190a 83%)",
    "type": "game",
    "tags": "platformer"
  },
  {
    "title": "Resolutiion",
    "author": "Monolith of Minds",
    "platforms": "windows,macos,linux,switch",
    "slug": "resolutiion",
    "image": "resolutiion.png",
    "placeholder": "linear-gradient(90deg,#5b0e73 2%,#412f82 24%,#41247e 86%,#5b0e73 97%)",
    "type": "game",
    "tags": "narrative,action"
  },
  {
    "title": "Dungeondraft",
    "author": "Megasploot",
    "platforms": "windows,macos",
    "slug": "dungeondraft",
    "image": "dungeondraft.jpg",
    "placeholder": "linear-gradient(90deg,#5b412f 4%,#5c4330 57%,#5d4a36 70%,#593c2b 98%)",
    "type": "game",
    "tags": "narrative,rpg"
  },
  {
    "title": "Material Maker",
    "author": "R0dZill4",
    "platforms": "windows,linux",
    "slug": "material-maker",
    "image": "material-maker.png",
    "placeholder": "linear-gradient(90deg,#353943 9%,#353943 29%,#353943 41%,#353943 61%)",
    "type": "tool",
    "tags": "graphics"
  },
  {
    "title": "RPG in a Box",
    "author": "Justin Arnold",
    "platforms": "windows,macos,linux",
    "slug": "rpg-in-a-box",
    "image": "rpg-in-a-box.png",
    "placeholder": "linear-gradient(90deg,#2d343c 1%,#2d343c 10%,#174d3a 24%,#161e23 80%)",
    "type": "framework",
    "tags": "rpg,narrative"
  },
  {
    "title": "Pixelorama",
    "author": "Orama Interactive",
    "platforms": "windows,macos,linux,html5",
    "slug": "pixelorama",
    "image": "pixelorama.png",
    "placeholder": "linear-gradient(90deg,#1b1c1c 10%,#776b7e 31%,#98797c 55%,#1b1c1c 77%)",
    "type": "tool",
    "tags": "graphics"
  },
  {
    "title": "City Game Studio",
    "author": "Binogure Studio",
    "platforms": "windows,macos,linux",
    "slug": "city-game-studio",
    "image": "city-game-studio.png",
    "placeholder": "linear-gradient(90deg,#d7dac1 14%,#d7dac1 27%,#7c7171 70%,#a69483 87%)",
    "type": "game",
    "tags": "simulation"
  },
  {
    "title": "Hive Time",
    "author": "Cheeseness",
    "platforms": "windows,macos,linux",
    "slug": "hive-time",
    "image": "hive-time.png",
    "placeholder": "linear-gradient(90deg,#2f702e 1%,#849067 34%,#91975a 43%,#909759 47%)",
    "type": "game",
    "tags": "simulation"
  },
  {
    "title": "ΔV: Rings of Saturn",
    "author": "Kodera Software",
    "platforms": "windows,macos,linux",
    "slug": "delta-v-rings-of-saturn",
    "image": "delta-v-rings-of-saturn.jpg",
    "placeholder": "linear-gradient(90deg,#060606 8%,#060607 27%,#0e0e0f 90%,#060606 97%)",
    "type": "game",
    "tags": "simulation"
  },
  {
    "title": "Precipice",
    "author": "Little Red Dog Games",
    "platforms": "windows,linux",
    "slug": "precipice",
    "image": "precipice.png",
    "placeholder": "linear-gradient(90deg,#343782 18%,#414145 47%,#522629 66%,#522629 81%)",
    "type": "game",
    "tags": "tactical"
  }
]
    ');

    $types = ['' => 'Type'];
    $platforms = ['' => 'Platform'];
    $tags = ['' => 'Tags'];

    foreach ($this['items'] as $item) {
      if (!array_key_exists($item->type, $types)) {
        $types[$item->type] = $item->type;
      }
      foreach (explode(',', $item->platforms) as $platform) {
        if (!array_key_exists($platform, $platforms)) {
          $platforms[$platform] = $platform;
        }
      }
      foreach (explode(',', $item->tags) as $tag) {
        if (!array_key_exists($tag, $tags)) {
          $tags[$tag] = $tag;
        }
      }
    }

    $this['types'] = $types;
    $this['platforms'] = $platforms;
    $this['tags'] = $tags;
    $this['filterTitle'] = Input::get('title', '');
    $this['filterPlatform'] = Input::get('platform', '');
    $this['filterType'] = Input::get('type', '');
    $this['filterTags'] = Input::get('tags', []);

    $this['initialFilteredItems'] = $this->filter(
      $this['items'],
      $this['filterTitle'],
      $this['filterPlatform'],
      $this['filterType'],
      $this['filterTags']
    );

}

function filter($items, $title, $platform, $type, $tags) {
    $returnItems = [];
    foreach ($items as $item) {
        if (
            str_contains(strtoupper($item->title), strtoupper($title)) &&
            str_contains($item->platforms, $platform) &&
            str_contains($item->type, $type)
        ) {
            $hasTags = true;
            foreach ($tags as $tag) {
                if (!str_contains($item->tags, $tag)) {
                    $hasTags = false;
                }
            }
            if ($hasTags) {
                array_push($returnItems, $item);
            }
        }
    }
    return $returnItems;
}

function onFilter() {
    $items = $this['items'];
    $renderedPartials = '';
    $title = input('title');
    $platform = input('platform');
    $type = input('type');
    $tags = input('tags', []);
    $items = $this->filter($this['items'], $title, $platform, $type, $tags);
    foreach ($items as $item) {
      $renderedPartials .= $this->renderPartial('showcase/list-item', [
          'title' => $item->title,
          'author' => $item->author,
          'platforms' => $item->platforms,
          'slug' => $item->slug,
          'image' => $item->image,
          'placeholder' => $item->placeholder
      ]);
    }
    return [
      '#showcaseItems' => $renderedPartials
    ];
}
?>
==
{##}
{% put title %} Showcase {% endput %}

<h2 class="title">Showreel videos</h2>

<p>
  Check out the showreel videos featuring some of our favorite projects made with Godot!
</p>

{# 2 columns at most (instead of 4). #}
<section class="flex grid" style="grid-template-columns: repeat(auto-fill, minmax(427px, 1fr))">
  <article>
    <div style="position: relative">
      <!-- Placeholder for aspect ratio. -->
      <svg viewBox="0 0 16 9" style="display: block; width: 100%; height: auto"></svg>
      <iframe
        width="854"
        height="480"
        src="https://www.youtube-nocookie.com/embed/UEDEIksGEjQ"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen
        style="position: absolute; left: 0; top: 0; width: 100%; height: 100%; background-color: black"
      ></iframe>
    </div>
  </article>

  <article>
    <div style="position: relative">
      <!-- Placeholder for aspect ratio. -->
      <svg viewBox="0 0 16 9" style="display: block; width: 100%; height: auto"></svg>
      <iframe
        width="854"
        height="480"
        src="https://www.youtube-nocookie.com/embed/AIapugketbs"
        frameborder="0"
        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen
        style="position: absolute; left: 0; top: 0; width: 100%; height: 100%; background-color: black"
      ></iframe>
    </div>
  </article>
</section>

<a name="showcase"></a><h2 class="title">Showcase</h2>

<p id="submit-project">
  <strong>Interested in showcasing your published game, tool or framework on this page?</strong>
  Use <a href="https://docs.google.com/forms/d/e/1FAIpQLSdhNEywWfk7tm4ABSxmPfnJrKwGPAoYbzRfZlHmu9iZ5CJ5Pw/viewform?usp=sf_link">this form</a>.
</p>

<style lang=css>
  #searchForm {
    padding: 1em;
    display: flex;
    flex-direction: row;
    justify-content: space-around;
    background: var(--head-background-color);
    margin-bottom: 1em;
  }
  #searchForm input, select {
    border: 1px solid black;
    padding: 0.5em 1em;
    flex: 1;
    background: var(--base-color);
    color: var(--primary-color-text) !important;
  }

  ::placeholder {
    color: var(--primary-color-text);
  }

  .selectize-control {
    display: inline-flex;
    flex: 1;
  }
  .selectize-input, .selectize-control.single .selectize-input.input-active {
    background: var(--base-color);
    color: var(--primary-color-text);
  }
  .selectize-input, .selectize-input.full, .selectize-dropdown, .selectize-control.multi .selectize-input.has-items {
    border: 1px solid black;
    padding: 0.5em 1em;
    background: var(--base-color);
    color: var(--primary-color-text);
  }

  .selectize-control.multi .selectize-input > div {
    margin: 0;
    padding: 0;
    padding-left: 5px;
    padding-right: 5px;
  }

  .selectize-input input {
    color: black;
  }

  @media (prefers-color-scheme: dark) {

  }
</style>

{# Filter form #}
{{form_ajax('onFilter', {'id': 'filterForm'})}}
<div id="searchForm">
  {{form_text('title', filterTitle, {'placeholder': 'Title', 'id': 'titleInput'})}}
  {{form_select('platform', platforms, filterPlatform, {'id': 'platformSelection'})}}
  {{form_select('type', types, filterType, {'id': 'typeSelection'})}}
  {{form_select('tags[]', tags, filterTags, {'id': 'tagSelection', 'multiple': 'true'})}}
</div>
{{form_close}}

<script type=text/javascript>
  let filterTimeout;
  function autoFilter() {
    clearTimeout(filterTimeout)
    filterTimeout = window.setTimeout(
      () => {
        $('#filterForm').submit()
      },
      250
    )
  }
  function resetAutoFilter() {
    clearTimeout(filterTimeout)
  }
  $('#platformSelection').selectize();
  $('#typeSelection').selectize();
  $('#tagSelection').selectize();
  $('#titleInput').keyup(autoFilter)
  $('#platformSelection').change(autoFilter)
  $('#typeSelection').change(autoFilter)
  $('#tagSelection').change(autoFilter)
  $('#titleInput').keydown(resetAutoFilter)
  $('#platformSelection').keydown(resetAutoFilter)
  $('#typeSelection').keydown(resetAutoFilter)
  $('#tagSelection').keydown(resetAutoFilter)
</script>

{# 3 columns at most (instead of 4). #}
{# Projects are sorted from most recent to least recent release date. #}
<section id="showcaseItems" class="flex grid showcase-cards" style="grid-template-columns: repeat(auto-fill, minmax(300px, 1fr))">
{% for item in initialFilteredItems %}
  {%
    partial "showcase/list-item"
    title=item.title
    author=item.author
    platforms=item.platforms
    slug=item.slug
    image=item.image
    placeholder=item.placeholder
  %}
{% endfor %}
</section>


